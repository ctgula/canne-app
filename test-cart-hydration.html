<!DOCTYPE html>
<html>
<head>
    <title>Cart Hydration Test</title>
</head>
<body>
    <h1>Cart Hydration Test</h1>
    <button onclick="addTestItem()">Add Test Item to Cart</button>
    <button onclick="checkCart()">Check Cart Contents</button>
    <button onclick="clearCart()">Clear Cart</button>
    <div id="output"></div>

    <script>
        const CART_STORAGE_KEY = 'canne-cart';
        
        function addTestItem() {
            const testItem = {
                product: {
                    id: 'test-product-id',
                    name: 'Test Product',
                    price: 25,
                    tier: 'Starter'
                },
                quantity: 1,
                strain: {
                    name: 'Moroccan Peach',
                    type: 'sativa',
                    thcLow: 18,
                    thcHigh: 22
                }
            };
            
            localStorage.setItem(CART_STORAGE_KEY, JSON.stringify([testItem]));
            document.getElementById('output').innerHTML = '<p>‚úÖ Test item added to localStorage</p>';
        }
        
        function checkCart() {
            const cart = localStorage.getItem(CART_STORAGE_KEY);
            const parsed = cart ? JSON.parse(cart) : [];
            const total = parsed.reduce((sum, item) => sum + (item.product.price * item.quantity), 0);
            
            document.getElementById('output').innerHTML = `
                <h3>Cart Contents:</h3>
                <pre>${JSON.stringify(parsed, null, 2)}</pre>
                <p><strong>Total: $${total}</strong></p>
                <p>Has Free Delivery (>= $35): ${total >= 35}</p>
                <p>Final Total: $${total >= 35 ? total : total + 10}</p>
            `;
        }
        
        function clearCart() {
            localStorage.removeItem(CART_STORAGE_KEY);
            document.getElementById('output').innerHTML = '<p>üóëÔ∏è Cart cleared</p>';
        }
    </script>
</body>
</html>
